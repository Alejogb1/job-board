---
title: "What causes multiple target patterns in makefile line 14?"
date: "2025-01-30"
id: "what-causes-multiple-target-patterns-in-makefile-line"
---
The error "multiple target patterns" in a Makefile typically stems from an ambiguity in the target specification on line 14.  My experience debugging complex build systems has shown this frequently arises from a misunderstanding of how Make interprets wildcard characters and pattern rules.  The core issue is that Make is encountering a line where the target definition allows for multiple interpretations, leading to an inability to definitively determine which recipe should execute.

**1. Clear Explanation:**

Makefiles utilize pattern rules, which are a powerful mechanism for creating generic build rules. A pattern rule consists of a target pattern containing wildcard characters (typically `%`) and a corresponding recipe. Make uses these patterns to match files or targets within the build. The "multiple target patterns" error signifies that Make has encountered a target specification on line 14 that matches multiple pattern rules or multiple files within those rules.  This ambiguity prevents Make from selecting a single, unambiguous action.

Several common scenarios can trigger this error:

* **Overlapping Wildcard Patterns:**  If two or more pattern rules have target patterns that overlap—meaning they can match the same target—Make will encounter the ambiguity. For example, `%.o: %.c` and `%.o: %.cpp` both match `file.o`, leading to the error.
* **Implicit Rules Conflict:** Make has built-in implicit rules (like compiling `.c` to `.o`).  If a custom pattern rule overlaps with an implicit rule, the same ambiguity arises.
* **Incorrect Wildcard Usage:** Incorrectly placed or used wildcard characters in the target pattern can lead to more matches than anticipated, resulting in the error.
* **Trailing Wildcards:**  While useful in some scenarios, trailing wildcards (like `foo%`) can easily lead to unexpected matches, particularly when combined with other rules.


Resolving the issue requires carefully examining line 14 of your Makefile, focusing on the target specification and its interaction with other rules.  The most straightforward solution is to refine the target patterns to be mutually exclusive; that is, each pattern should match a unique set of targets.  Prioritizing explicit rules over implicit rules is also a recommended approach to reduce the likelihood of such conflicts.


**2. Code Examples with Commentary:**

**Example 1: Overlapping Patterns**

```makefile
%.o: %.c
	gcc -c $< -o $@

%.o: %.cpp
	g++ -c $< -o $@

main.o: main.cpp # Line 14 - Problem line
	# ... custom compilation for main.cpp

main: main.o
	gcc main.o -o main
```

In this example, `main.o` can be generated by *either* the `%.o: %.c` or the `%.o: %.cpp` rule. The presence of `main.cpp` as the source exacerbates the problem.  Make cannot determine which rule to apply, resulting in the error.  To fix this, remove the unnecessary general rule `%.o: %.c` since `%.o: %.cpp` explicitly covers `main.o`.


**Example 2: Implicit Rule Conflict**

```makefile
%.html: %.md
	pandoc $< -o $@

index.html: index.md #Line 14
	# Custom Pandoc options for the index file

```

This example might not *immediately* show an error if you don't have any other rules for `.html` files. However, Make likely has an implicit rule for generating HTML (depending on your Make configuration). This implicit rule might conflict with the explicit rule defined for `%.html`.  To resolve it, ensure that your custom rule for `.html` files doesn't overlap with implicit rules.  One approach would be to rename the target if you do want to retain both your rule and the implicit rule. For example, change the target to `index.html_custom` and adjust the subsequent dependency accordingly.

**Example 3: Incorrect Wildcard Usage**

```makefile
%.txt: %.data
	process $< > $@

datafile.txt: datafile.data #Line 14
	# ...specific processing for datafile.txt

report.txt: reportdata% # Line 15 - Problem line
	# ... other processing
```

Here, the wildcard in `report.txt: reportdata%` is problematic.  `reportdata%` might match multiple files (e.g., `reportdata1.data`, `reportdata2.data`), making it ambiguous.  The solution is to specify the exact source file.  If  `report.txt` depends only on `reportdata1.data`, the line should be modified to `report.txt: reportdata1.data`.


**3. Resource Recommendations:**

Consult the official GNU Make manual. This provides comprehensive details on pattern rules, wildcard usage, and implicit rules. Pay close attention to the sections on pattern matching and rule ordering.  A thorough understanding of these concepts is crucial for avoiding "multiple target patterns" errors and crafting robust Makefiles.  Reviewing tutorials and examples focusing on advanced Makefile techniques will further enhance your understanding and ability to diagnose and fix such issues effectively.  Familiarize yourself with common pitfalls and best practices for writing maintainable and error-free Makefiles.
